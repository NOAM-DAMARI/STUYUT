×™×© ×œ×™ ××ª×¨ ×©×‘×• ×™×© 
app.py:
---
import streamlit as st
from streamlit_option_menu import option_menu
from user_management import authenticate, check_admin
from file_management import view_uploads, upload_file
from pdf_processing import convert_pdf_to_png, convert_png_to_pdf, rotate_pdf, rearrange_pdf_ui  # ×¢×“×›×•×Ÿ ×›××Ÿ!

# ×™×™×‘×•× ×©×œ ×¤×•× ×§×¦×™×•×ª ××”×§×•×‘×¥ pdf_processing.py
from pdf_processing import (
    convert_pdf_to_png_ui,
    convert_png_to_pdf,
    rotate_pdf,
    rearrange_pdf_ui
)


# ×™×™×‘×•× ×©×œ ×¤×•× ×§×¦×™×•×ª ××”×§×•×‘×¥ file_management.py
from file_management import (
    upload_file,
    delete_file,
    list_files,
    download_file
)

# ×™×™×‘×•× ×©×œ ×¤×•× ×§×¦×™×•×ª ××”×§×•×‘×¥ signature.py
from signature import sign_file

# ×™×™×‘×•× ×©×œ ×¤×•× ×§×¦×™×•×ª ××”×§×•×‘×¥ user_management.py
from user_management import (
    login,
    logout,
    is_admin,
    add_user,
    edit_user,
    delete_user,
    list_users
)

st.set_page_config(page_title="PDF Tool", page_icon="ğŸ“„", layout="wide")

if "logged_in" not in st.session_state:
    st.session_state["logged_in"] = False
    st.session_state["is_admin"] = False

if not st.session_state["logged_in"]:
    st.title("ğŸ”‘ ×”×ª×—×‘×¨×•×ª ×œ××¢×¨×›×ª")
    email = st.text_input("××™××™×™×œ")
    password = st.text_input("×¡×™×¡××”", type="password")
    if st.button("ğŸ”“ ×”×ª×—×‘×¨"):
        user = authenticate(email, password)
        if user:
            st.session_state["logged_in"] = True
            st.session_state["is_admin"] = user[2]
            st.experimental_rerun()
        else:
            st.error("âš ï¸ ××™××™×™×œ ××• ×¡×™×¡××” ×©×’×•×™×™×!")
else:
    with st.sidebar:
        selected_option = option_menu(
            "××¤×©×¨×•×™×•×ª",
            ["ğŸ  ×“×£ ×”×‘×™×ª", "ğŸ“„ ×”××¨×ª PDF ×œ-PNG", "ğŸ–¼ï¸ ×”××¨×ª PNG ×œ-PDF", "ğŸ”„ ×¡×™×‘×•×‘ ×“×¤×™ PDF", "ğŸ“‘ ×¡×™×“×•×¨ ××—×“×© ×©×œ ×“×¤×™ PDF", "ğŸ“ ×™×™×©×•×¨ ×˜×§×¡×˜", "ğŸ“– ×”×“×¤×¡×ª ×—×•×‘×¨×ª"],
            icons=["house", "file-pdf", "image", "arrow-repeat", "file-code", "file-text", "book"],
            default_index=0,
        )

    if selected_option == "ğŸ  ×“×£ ×”×‘×™×ª":
        st.title("ğŸ“„ ×›×œ×™ PDF - ×“×£ ×”×‘×™×ª")
    elif selected_option == "ğŸ“„ ×”××¨×ª PDF ×œ-PNG":
        convert_pdf_to_png()
    elif selected_option == "ğŸ–¼ï¸ ×”××¨×ª PNG ×œ-PDF":
        convert_png_to_pdf()
    elif selected_option == "ğŸ”„ ×¡×™×‘×•×‘ ×“×¤×™ PDF":
        rotate_pdf()
    elif selected_option == "ğŸ“‘ ×¡×™×“×•×¨ ××—×“×© ×©×œ ×“×¤×™ PDF":
        rearrange_pdf_ui()  # ×¢×“×›×•×Ÿ ×›××Ÿ!
    elif selected_option == "ğŸ“ ×™×™×©×•×¨ ×˜×§×¡×˜":
        align_text()  # type: ignore
    elif selected_option == "ğŸ“– ×”×“×¤×¡×ª ×—×•×‘×¨×ª":
        print_booklet()  # type: ignore

---
file_management.py:
import os
import sqlite3
from datetime import datetime
import streamlit as st

def get_db_connection():
    conn = sqlite3.connect("uploads.db")
    conn.execute('''CREATE TABLE IF NOT EXISTS uploads (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    user_id INTEGER,
                    filename TEXT,
                    upload_time TEXT
                )''')
    conn.commit()
    return conn

def upload_file():
    uploaded_file = st.file_uploader("ğŸ“‚ ×”×¢×œ×” ×§×•×‘×¥")
    if uploaded_file:
        filename = f"{datetime.now().strftime('%Y%m%d%H%M%S')}_{uploaded_file.name}"
        with open(filename, "wb") as f:
            f.write(uploaded_file.getbuffer())
        
        conn = get_db_connection()
        conn.execute("INSERT INTO uploads (user_id, filename, upload_time) VALUES (?, ?, ?)",
                     (st.session_state["user_id"], filename, datetime.now().strftime('%Y-%m-%d %H:%M:%S')))
        conn.commit()
        conn.close()
        st.success("âœ… ×”×§×•×‘×¥ ×”×•×¢×œ×” ×•× ×—×ª× ×‘×”×¦×œ×—×”!")

def view_uploads():
    st.title("ğŸ—‚ï¸ ×§×‘×¦×™× ×©×”×•×¢×œ×•")
    conn = get_db_connection()
    c = conn.cursor()
    c.execute('''SELECT id, filename, upload_time FROM uploads''')
    uploads = c.fetchall()
    conn.close()

    st.subheader("ğŸ“ ×¨×©×™××ª ×§×‘×¦×™× ×©×”×•×¢×œ×•")
    for upload in uploads:
        st.write(f"ğŸ†” {upload[0]} | ğŸ“„ {upload[1]} | â° {upload[2]}")
        if st.button("ğŸ—‘ï¸ ××—×™×§×”", key=f"delete_{upload[0]}"):
            os.remove(upload[1])
            conn = get_db_connection()
            conn.execute("DELETE FROM uploads WHERE id=?", (upload[0],))
            conn.commit()
            conn.close()
            st.success(f"âœ… ×”×§×•×‘×¥ {upload[1]} × ××—×§ ×‘×”×¦×œ×—×”!")
            st.experimental_rerun()


---
pdf_processing.py:
import streamlit as st
from PyPDF2 import PdfReader
import pdf2image

def convert_pdf_to_png(file):
    """×”××¨×ª PDF ×œ×ª××•× ×ª PNG"""
    images = pdf2image.convert_from_path(file)
    for i, image in enumerate(images):
        image.save(f'output_page_{i}.png', 'PNG')
    st.success("×”××¨×ª PDF ×œ-PNG ×”×•×©×œ××”!")
    for i in range(len(images)):
        st.image(f'output_page_{i}.png')
        with open(f'output_page_{i}.png', "rb") as img_file:
            st.download_button(label="ğŸ“¥ ×”×•×¨×“ ×ª××•× ×”", data=img_file, file_name=f"output_page_{i}.png", mime="image/png")

def convert_pdf_to_png_ui():
    ""import streamlit as st
from PyPDF2 import PdfReader, PdfWriter
import pdf2image
from PIL import Image

# ×”××¨×ª PDF ×œ-PNG
def convert_pdf_to_png(file):
    images = pdf2image.convert_from_bytes(file.read())
    for i, image in enumerate(images):
        image.save(f'output_page_{i}.png', 'PNG')
        st.image(f'output_page_{i}.png')
        with open(f'output_page_{i}.png', "rb") as img_file:
            st.download_button(label="ğŸ“¥ ×”×•×¨×“ ×ª××•× ×”", data=img_file, file_name=f"output_page_{i}.png", mime="image/png")

def convert_pdf_to_png_ui():
    st.title("ğŸ“„ ×”××¨×ª PDF ×œ-PNG")
    uploaded_file = st.file_uploader("×‘×—×¨ ×§×•×‘×¥ PDF", type="pdf")
    if uploaded_file:
        if st.button("ğŸ“„ ×”××¨ ×œ-PNG"):
            convert_pdf_to_png(uploaded_file)

# ×”××¨×ª PNG ×œ-PDF
def convert_png_to_pdf(files):
    images = [Image.open(file) for file in files]
    pdf_path = "output.pdf"
    images[0].save(pdf_path, save_all=True, append_images=images[1:], format="PDF")
    with open(pdf_path, "rb") as pdf_file:
        st.download_button(label="ğŸ“¥ ×”×•×¨×“ PDF", data=pdf_file, file_name="output.pdf", mime="application/pdf")

def convert_png_to_pdf_ui():
    st.title("ğŸ–¼ï¸ ×”××¨×ª PNG ×œ-PDF")
    uploaded_files = st.file_uploader("×‘×—×¨ ×ª××•× ×•×ª PNG", type="png", accept_multiple_files=True)
    if uploaded_files:
        if st.button("ğŸ–¼ï¸ ×”××¨ ×œ-PDF"):
            convert_png_to_pdf(uploaded_files)

# ×¡×™×‘×•×‘ ×“×¤×™ PDF
def rotate_pdf(file):
    reader = PdfReader(file)
    writer = PdfWriter()
    for page in reader.pages:
        page.rotate(90)
        writer.add_page(page)
    with open("rotated_pdf.pdf", "wb") as f:
        writer.write(f)
    with open("rotated_pdf.pdf", "rb") as pdf_file:
        st.download_button(label="ğŸ“¥ ×”×•×¨×“ PDF", data=pdf_file, file_name="rotated_pdf.pdf", mime="application/pdf")

def rotate_pdf_ui():
    st.title("ğŸ”„ ×¡×™×‘×•×‘ ×“×¤×™ PDF")
    uploaded_file = st.file_uploader("×‘×—×¨ ×§×•×‘×¥ PDF", type="pdf")
    if uploaded_file:
        if st.button("ğŸ”„ ×¡×•×‘×‘ ×‘-90 ××¢×œ×•×ª"):
            rotate_pdf(uploaded_file)

# ×¡×™×“×•×¨ ××—×“×© ×©×œ ×“×¤×™ PDF
def rearrange_pdf(file):
    reader = PdfReader(file)
    writer = PdfWriter()
    pages = reader.pages[::-1]
    for page in pages:
        writer.add_page(page)
    with open("rearranged_pdf.pdf", "wb") as f:
        writer.write(f)
    with open("rearranged_pdf.pdf", "rb") as pdf_file:
        st.download_button(label="ğŸ“¥ ×”×•×¨×“ PDF", data=pdf_file, file_name="rearranged_pdf.pdf", mime="application/pdf")

def rearrange_pdf_ui():
    st.title("ğŸ“‘ ×¡×™×“×•×¨ ××—×“×© ×©×œ ×“×¤×™ PDF")
    uploaded_file = st.file_uploader("×‘×—×¨ ×§×•×‘×¥ PDF", type="pdf")
    if uploaded_file:
        if st.button("ğŸ“‘ ×¡×™×“×•×¨ ××—×“×©"):
            rearrange_pdf(uploaded_file)
"×××©×§ ××©×ª××© ×œ×”××¨×ª PDF ×œ-PNG"""
    st.title("ğŸ“„ ×”××¨×ª PDF ×œ-PNG")
    uploaded_file = st.file_uploader("×‘×—×¨ ×§×•×‘×¥ PDF", type="pdf")
    if uploaded_file:
        if st.button("ğŸ“„ ×”××¨ ×œ-PNG"):
            convert_pdf_to_png(uploaded_file)


---
pdf_processing.test.py:
import pytest
from pdf_processing import convert_pdf_to_png, convert_png_to_pdf, rotate_pdf, rearrange_pdf

def test_convert_pdf_to_png():
    assert convert_pdf_to_png("test.pdf") is None

def test_convert_png_to_pdf():
    assert convert_png_to_pdf(["test1.png", "test2.png"]) is None

def test_rotate_pdf():
    assert rotate_pdf("test.pdf") is None

def test_rearrange_pdf():
    assert rearrange_pdf("test.pdf") is None

---
signature.py:
from PyPDF2 import PdfReader, PdfWriter
from datetime import datetime

def sign_pdf(file):
    """×—×ª×™××” ×¢×œ ×§×•×‘×¥ PDF"""
    reader = PdfReader(file)
    writer = PdfWriter()
    
    # ×”×•×¡×¤×ª ×ª××¨×™×š ×•×©×¢×” ×œ×—×ª×™××”
    signature_text = f"× ×—×ª× ×‘×ª××¨×™×š: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
    
    # ×× ×™×—×™× ×©×”×ª××•× ×” ×ª×™×•×•×¡×£ ×›××Ÿ, ×œ××©×œ ×›×—×ª×™××” ×’×¨×¤×™×ª
    st.text(signature_text)
    
    for page in reader.pages:
        writer.add_page(page)

    with open("signed_pdf.pdf", "wb") as f:
        writer.write(f)

    st.success("×”×§×•×‘×¥ × ×—×ª× ×‘×”×¦×œ×—×”!")

---
user_management.py:
import sqlite3
import streamlit as st

def get_db_connection():
    conn = sqlite3.connect("users.db")
    conn.execute('''CREATE TABLE IF NOT EXISTS users (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    email TEXT NOT NULL UNIQUE,
                    password TEXT NOT NULL,
                    is_admin BOOLEAN NOT NULL DEFAULT 0
                )''')
    conn.commit()
    return conn

def authenticate(email, password):
    conn = get_db_connection()
    c = conn.cursor()
    c.execute("SELECT id, email, is_admin FROM users WHERE email=? AND password=?", (email, password))
    user = c.fetchone()
    conn.close()
    return user

def check_admin():
    return st.session_state.get("is_admin", False)

def manage_users():
    if not check_admin():
        st.error("â›” ××™×Ÿ ×œ×š ×”×¨×©××•×ª ×× ×”×œ!")
        return

    st.title("ğŸ›  × ×™×”×•×œ ××©×ª××©×™×")
    conn = get_db_connection()
    c = conn.cursor()
    c.execute("SELECT id, email, is_admin FROM users")
    users = c.fetchall()

    st.subheader("ğŸ“‹ ×¨×©×™××ª ××©×ª××©×™×")
    for user in users:
        st.write(f"ğŸ†” {user[0]} | âœ‰ï¸ {user[1]} | ğŸ”‘ {'×× ×”×œ' if user[2] else '××©×ª××© ×¨×’×™×œ'}")

    st.subheader("â• ×”×•×¡×¤×ª ××©×ª××© ×—×“×©")
    new_email = st.text_input("××™××™×™×œ ×—×“×©")
    new_password = st.text_input("×¡×™×¡××” ×—×“×©×”", type="password")
    new_is_admin = st.checkbox("×”×× ×× ×”×œ?")
    if st.button("ğŸ’¾ ×©××™×¨×ª ××©×ª××© ×—×“×©"):
        try:
            c.execute("INSERT INTO users (email, password, is_admin) VALUES (?, ?, ?)",
                      (new_email, new_password, new_is_admin))
            conn.commit()
            st.success("âœ… ××©×ª××© × ×•×¡×£ ×‘×”×¦×œ×—×”!")
            st.experimental_rerun()
        except sqlite3.IntegrityError:
            st.error("âš ï¸ ××™××™×™×œ ×–×” ×›×‘×¨ ×§×™×™× ×‘××¢×¨×›×ª.")
    conn.close()

---
requirements.txt:
streamlit
streamlit-option-menu
PyPDF2
pdf2image
Pillow
pytest


